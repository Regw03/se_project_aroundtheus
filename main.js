!function(){"use strict";function e(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var i=s.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class t{constructor(t,s,i,n,r){e(this,"handleDelete",(()=>{this._cardElement.remove()})),e(this,"handleLike",(e=>{this._isLiked=e,this._toggleLike()})),e(this,"_toggleLike",(()=>{this._isLiked?this.likeButton.classList.add("elements__card-button_active"):this.likeButton.classList.remove("elements__card-button_active")})),this._name=t.name,this._link=t.link,this._handleImageClick=i,this._cardSelector=s,this._handleDeleteClick=n,this._cardId=t._id,this._handleLikeClick=r,this._isLiked=t.isLiked}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".elements__card").cloneNode(!0)}getView(){return this._cardElement=this._getTemplate(),this._setEventListeners(),this._toggleLike(),this._cardElement.querySelector(".elements__card-image").src=this._link,this._cardElement.querySelector(".elements__card-image").alt=this._name,this._cardElement.querySelector(".elements__card-title").textContent=this._name,this._cardElement}_setEventListeners(){this.likeButton=this._cardElement.querySelector("#like-button"),this.likeButton.addEventListener("click",(()=>this._handleLikeClick(this._cardId))),this._cardElement.querySelector(".elements__trash-button").addEventListener("click",(()=>this._handleDeleteClick(this._cardId))),this._cardElement.querySelector(".elements__card-image").addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}}const s=document.querySelector(".profile__add-button"),i=document.querySelector(".profile__edit-button"),n=(document.querySelector(".popup__close-button"),document.querySelector("#add_close-button"),document.querySelector("#add_submit"),document.querySelector("#image_preview-close"),document.querySelector(".elements__trash-button"),document.querySelector(".profile__info-name"),document.querySelector(".profile__info-profession"),document.querySelector(".popup__form")),r=(document.querySelector("#edit-popup"),document.querySelector("#delete_card"),document.querySelector("#add-form")),o=n.querySelector("#name-input"),a=n.querySelector("#profession-input"),c=document.querySelector(".profile__avatar-edit-button"),l=document.querySelector("#change_avatar-form"),d=(r.querySelector("#add_title-input"),r.querySelector("#add_link-input"),{formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"}),u={};var p=class{constructor(e,t){this._settings=e,this._form=t,this._avatarEditForm=l}_setEventListeners(){const e=[...this._form.querySelectorAll(this._settings.inputSelector)],t=this._form.querySelector(this._settings.submitButtonSelector);this._toggleButton(e,t,u),e.forEach((s=>{s.addEventListener("input",(i=>{this._checkInputValidity(this._form,s,this._settings),this._toggleButton(e,t,this._settings)}))}))}_showInputError(e){const t=this._form.querySelector("#"+e.id+"-error");t.textContent=e.validationMessage,t.classList.add(this._settings.errorClass),e.classList.add(this._settings.inputErrorClass)}_hideInputError(e){const t=this._form.querySelector("#"+e.id+"-error");t.textContent="",t.classList.remove(this._settings.errorClass),e.classList.remove(this._settings.inputErrorClass)}_checkInputValidity(e,t,s){t.validity.valid?this._hideInputError(t,this._form,this._settings):this._showInputError(t,this._form,this._settings)}_hasValidInputs(e){return e.every((e=>!0===e.validity.valid))}_toggleButton(){const e=[...this._form.querySelectorAll(this._settings.inputSelector)];this.button=this._form.querySelector(this._settings.submitButtonSelector),this._hasValidInputs(e)?this._enableSubmitButton():this.disableSubmitButton()}_enableSubmitButton(){this.button.disabled=!1,this.button.classList.remove(this._settings.inactiveButtonClass)}disableSubmitButton(){this.button.disabled=!0,this.button.classList.add(this._settings.inactiveButtonClass)}enableValidation(){this._form.addEventListener("submit",(e=>e.preventDefault())),this._setEventListeners()}};class h{constructor(e){var t,s,i;t=this,i=e=>{"Escape"===e.key&&this.close()},(s=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var i=s.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(s="_handleEscClose"))in t?Object.defineProperty(t,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[s]=i,this.popup=document.querySelector(e),this.closeButton=this.popup.querySelector(".popup__close-button"),this._handleEscClose=this._handleEscClose.bind(this)}open(){this.popup.classList.add("popup_is-open"),document.addEventListener("keydown",this._handleEscClose)}close(){this.popup.classList.remove("popup_is-open"),document.removeEventListener("keydown",this._handleEscClose)}_handleOverlayClick(e){e.target.classList.contains("popup_is-open")&&this.close()}setEventListeners(){this.closeButton.addEventListener("click",(()=>this.close())),this.popup.addEventListener("click",this._handleOverlayClick.bind(this))}}class m extends h{constructor(e,t){super(e),this.handleFormSubmit=t,this._popupForm=this.popup.querySelector(".popup__form"),this._submitButton=this._popupForm.querySelector(".popup__submit"),this._inputList=this._popupForm.querySelectorAll(".popup__input")}_getInputValues(){return this._formValues={},this._inputList.forEach((e=>this._formValues[e.name]=e.value)),this._formValues}close(){this._popupForm.reset(),super.close()}setEventListeners(){this._popupForm.addEventListener("submit",(()=>{this.handleFormSubmit(this._getInputValues())})),super.setEventListeners()}renderLoading(e){this._submitButton.textContent=e?"Saving...":"Save"}}class _{constructor(e,t){let{items:s,renderer:i}=e;this.renderer=i,this.items=s,this.element=document.querySelector(t)}renderItems(){this.items.forEach((e=>{this.renderer(e)}))}addItem(e){this.element.prepend(e)}}document.querySelector(".elements__card-grid");const v=document.querySelector("#image_preview");v.querySelector(".popup__image"),v.querySelector(".popup__image-title"),new p(d,n).enableValidation();const f=new p(d,r);f.enableValidation(),new p(d,l).enableValidation();const y=new m("#add-popup",(e=>{y.renderLoading(!0),P.addCards(e).then((e=>{const t=I(e);T.addItem(t),y.renderLoading(!1),y.close()}))}));y.setEventListeners();const b=new m("#edit-popup",(e=>{b.renderLoading(!0),P.editProfile({name:e.name,about:e.profession}).then((e=>{C.setUserInfo(e.name,e.about),b.renderLoading(!1)})),b.close()})),S=new m("#change_avatar",(e=>{S.renderLoading(!0),P.changeAvatar(e).then((e=>{console.log(e),C.setAvatarImgInfo(e.avatar),S.renderLoading(!1),S.close()}))}));S.setEventListeners(),c.addEventListener("click",(function(){S.open()}));const g=new class extends h{constructor(e){super(e),this._title=this.popup.querySelector(".popup__image-title"),this._image=this.popup.querySelector(".popup__image")}open(e){let{link:t,name:s}=e;this._title.textContent=s,this._image.src=t,this._image.alt=s,super.open()}}("#image_preview");g.setEventListeners();const k=document.querySelector(".profile__avatar"),L=document.querySelector("#infoname"),E=document.querySelector("#profession"),C=new class{constructor(e,t,s){this.name=e,this.profession=t,this.link=s}getUserInfo(){return{profession:this.profession.textContent,name:this.name.textContent}}setUserInfo(e,t){this.name.textContent=e,this.profession.textContent=t}setAvatarImgInfo(e){this.link.src=e}}(L,E,k);function q(e){let{name:t,link:s}=e;g.open({name:t,link:s})}function I(e){return new t(e,"#card-template",q,B,j).getView()}b.setEventListeners(),i.addEventListener("click",(function(){const e=C.getUserInfo();o.value=e.name,a.value=e.profession,b.open()}));const w=new class extends h{constructor(e){super(e),this._popupForm=this.popup.querySelector(".popup__form")}setSubmitAction(e){this.handleFormSubmit=e}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this.handleFormSubmit()})),super.setEventListeners()}renderLoading(e){this._submitButton.textContent=e?"Saving...":"Save"}}("#delete_card");function B(e){w.open(),w.setSubmitAction((()=>{P.deleteCard({cardId:e}).then((()=>{this.handleDelete()})),w.close()}))}function j(e){this._isLiked?P.removeLike(e).then((()=>{this.handleLike(!1)})):P.addLike(e).then((()=>{this.handleLike(!0)}))}w.setEventListeners(),s.addEventListener("click",(function(){f.disableSubmitButton(),y.open()}));const P=new class{constructor(e){this.getInitialCards=this.getInitialCards,this.addCards=this.addCards,this.editProfile=this.editProfile,this.likeButton=this.likeButton,this.addLike=this.addLike,this.removeLike=this.removeLike}async getInitialCards(){const e=await fetch("https://around-api.en.tripleten-services.com/v1/cards",{headers:{authorization:"b38ed4d6-3275-4538-846d-7ec5d56fd185"}});return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}async addCards(e){let{name:t,link:s}=e;const i=await fetch("https://around-api.en.tripleten-services.com/v1/cards",{method:"POST",headers:{authorization:"b38ed4d6-3275-4538-846d-7ec5d56fd185","Content-Type":"application/JSON"},body:JSON.stringify({name:t,link:s})});return i.ok?i.json():Promise.reject(`Error: ${i.status}`)}async getUserInfo(){const e=await fetch("https://around-api.en.tripleten-services.com/v1/users/me",{headers:{authorization:"b38ed4d6-3275-4538-846d-7ec5d56fd185","Content-Type":"application/JSON"}});return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}async editProfile(e){let{name:t,about:s}=e;const i=await fetch("https://around-api.en.tripleten-services.com/v1/users/me",{method:"PATCH",headers:{authorization:"b38ed4d6-3275-4538-846d-7ec5d56fd185","Content-Type":"application/JSON"},body:JSON.stringify({name:t,about:s})});return i.ok?i.json():Promise.reject(`Error: ${i.status}`)}async deleteCard(e){let{cardId:t}=e;const s=await fetch("https://around-api.en.tripleten-services.com/v1/cards/"+t,{method:"DELETE",headers:{authorization:"b38ed4d6-3275-4538-846d-7ec5d56fd185","Content-Type":"application/JSON"}});return s.ok?s.json():Promise.reject(`Error: ${s.status}`)}async addLike(e){const t=await fetch("https://around-api.en.tripleten-services.com/v1/cards/"+e+"/likes",{method:"PUT",headers:{authorization:"b38ed4d6-3275-4538-846d-7ec5d56fd185","Content-Type":"application/JSON"}});return t.ok?t.json():Promise.reject(`Error: ${t.status}`)}async removeLike(e){const t=await fetch("https://around-api.en.tripleten-services.com/v1/cards/"+e+"/likes",{method:"DELETE",headers:{authorization:"b38ed4d6-3275-4538-846d-7ec5d56fd185","Content-Type":"application/JSON"}});return t.ok?t.json():Promise.reject(`Error: ${t.status}`)}async changeAvatar(e){let{link:t}=e;const s=await fetch("https://around-api.en.tripleten-services.com/v1/users/me/avatar",{method:"PATCH",headers:{authorization:"b38ed4d6-3275-4538-846d-7ec5d56fd185","Content-Type":"application/JSON"},body:JSON.stringify({avatar:t})});return s.ok?s.json():Promise.reject(`Error: ${s.status}`)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"4b5610a4-d4fb-4ac3-a0cf-5cf08fc2641b","Content-Type":"application/json"}});let T;P.getInitialCards().then((e=>{T=new _({items:e,renderer:e=>{const t=I(e);T.addItem(t)}},".elements__card-grid"),T.renderItems()})),P.getUserInfo().then((e=>{C.setUserInfo(e.name,e.about),C.setAvatarImgInfo(e.avatar)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUVUWCxRQUFTLENBQ1BDLGNBQWUsdUNBQ2YsZUFBZ0Isc0JBSXBCLElBQUlsQyxFQUNKTCxFQUFJb0Msa0JBQWtCbEMsTUFBTWdELElBQzFCN0MsRUFBVSxJQUFJbkIsRUFDWixDQUNFRSxNQUFPOEQsRUFDUDdELFNBQVdHLElBQ1QsTUFBTVcsRUFBT0MsRUFBV1osR0FDeEJhLEVBQVFaLFFBQVFVLEVBQUssR0FHekIsd0JBRUZFLEVBQVFkLGFBQWEsSUFHdkJTLEVBQUl3QixjQUFjdEIsTUFBTVEsSUFDdEJDLEVBQVNDLFlBQVlGLEVBQUtoSCxLQUFNZ0gsRUFBS0YsT0FDckNHLEVBQVNPLGlCQUFpQlIsRUFBS1MsT0FBTyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihjYXJkRGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrLCBoYW5kbGVEZWxldGVDbGljaywgaGFuZGxlTGlrZUNsaWNrKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gY2FyZERhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBjYXJkRGF0YS5saW5rO1xyXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xyXG4gICAgdGhpcy5fY2FyZElkID0gY2FyZERhdGEuX2lkO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xyXG4gICAgdGhpcy5faXNMaWtlZCA9IGNhcmREYXRhLmlzTGlrZWQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBnZXRWaWV3KCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3RvZ2dsZUxpa2UoKTtcclxuICAgIC8vIHJlcGxhY2UgaW1nIHNyY1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY2FyZC1pbWFnZVwiKS5zcmMgPSB0aGlzLl9saW5rO1xyXG5cclxuICAgIC8vIHJlcGxhY2UgaW1nIGFsdFxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY2FyZC1pbWFnZVwiKS5hbHQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIC8vIHJlcGxhY2UgdGl0bGVcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2NhcmQtdGl0bGVcIikudGV4dENvbnRlbnQgPVxyXG4gICAgICB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIGhhbmRsZURlbGV0ZSA9ICgpID0+IHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gIH07XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vbGlrZSBidXR0b25cclxuICAgIHRoaXMubGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbGlrZS1idXR0b25cIik7XHJcblxyXG4gICAgLy9jYXJkcyBsaWtlIGV2ZW50XHJcbiAgICB0aGlzLmxpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZUxpa2VDbGljayh0aGlzLl9jYXJkSWQpKTtcclxuXHJcbiAgICAvL2NhcmRzIGRlbGV0ZSBldmVudFxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX3RyYXNoLWJ1dHRvblwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sodGhpcy5fY2FyZElkKSk7XHJcblxyXG4gICAgLy9pbWFnZSBwcmV2aWV3IHBvcHVwXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY2FyZC1pbWFnZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHsgbmFtZTogdGhpcy5fbmFtZSwgbGluazogdGhpcy5fbGluayB9KTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG4gIFxyXG4gIGhhbmRsZUxpa2UgPSAoaXNMaWtlZCkgPT4ge1xyXG4gICAgdGhpcy5faXNMaWtlZCA9IGlzTGlrZWRcclxuICAgIHRoaXMuX3RvZ2dsZUxpa2UoKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVMaWtlID0gKCkgPT4ge1xyXG4gICAgXHJcbiAgICBpZiAodGhpcy5faXNMaWtlZCkge1xyXG4gICAgICAgIHRoaXMubGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiZWxlbWVudHNfX2NhcmQtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJlbGVtZW50c19fY2FyZC1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gIH07XHJcbn07XHJcblxyXG5cclxuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFt7XHJcbiAgICAgICAgbmFtZTogJ1lvc2VtaXRlIFZhbGxleScsXHJcbiAgICAgICAgbGluazogJ2h0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZycsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6ICdMYWtlIExvdWlzZScsXHJcbiAgICAgICAgbGluazogJ2h0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZycsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6ICdCYWxkIE1vdW50YWlucycsXHJcbiAgICAgICAgbGluazogJ2h0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZycsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6ICdMYXRlbWFyJyxcclxuICAgICAgICBsaW5rOiAnaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGcnLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiAnVmFub2lzZSBOYXRpb25hbCBQYXJrJyxcclxuICAgICAgICBsaW5rOiAnaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGcnLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiAnTGFnbyBkaSBCcmFpZXMnLFxyXG4gICAgICAgIGxpbms6ICdodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZycsXHJcbiAgICB9LFxyXG5dO1xyXG5cclxuLy9hZGQgYnV0dG9uXHJcbmV4cG9ydCBjb25zdCBhZGRDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcclxuLy9lZGl0IGJ1dHRvblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idXR0b24nKTtcclxuLy9wb3B1cCBjbG9zZSBidXR0b25cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0Q2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWJ1dHRvbicpO1xyXG4vL2FkZCBjbG9zZSBidXR0b25cclxuZXhwb3J0IGNvbnN0IGFkZENsb3NlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkZF9jbG9zZS1idXR0b24nKTtcclxuLy9hZGQgc2F2ZSBidXR0b25cclxuZXhwb3J0IGNvbnN0IGFkZFNhdmVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWRkX3N1Ym1pdCcpO1xyXG4vLyBpbWFnZSBwcmV2aWV3IGNsb3NlXHJcbmV4cG9ydCBjb25zdCBwcmV2aWV3Q2xvc2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2ltYWdlX3ByZXZpZXctY2xvc2VcIik7XHJcbi8vZGVsZXRlIEJ1dHRvblxyXG5leHBvcnQgY29uc3QgZGVsZXRlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fdHJhc2gtYnV0dG9uXCIpXHJcbi8vcHJvZmlsZSB0aXRsZVxyXG5leHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2luZm8tbmFtZScpO1xyXG4vL3Byb2ZpbGUgcHJvZmVzc2lvblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZVByb2Zlc3Npb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9faW5mby1wcm9mZXNzaW9uJyk7XHJcbi8vIHByb2ZpbGUgZWRpdCBmb3JtXHJcbmV4cG9ydCBjb25zdCBwb3B1cEVkaXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XHJcbi8vZWRpdCBwb3B1cFxyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlZGl0LXBvcHVwJyk7XHJcbi8vZGVsZXRlIGNhcmQgcG9wdXBcclxuZXhwb3J0IGNvbnN0IHBvcHVwV2l0aERlbGV0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVsZXRlX2NhcmRcIilcclxuLy8gYWRkIGJ1dHRvbiBmb3JtXHJcbmV4cG9ydCBjb25zdCBhZGRDYXJkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGQtZm9ybScpO1xyXG5cclxuLy9lZGl0IGZvcm0gZGF0YVxyXG5leHBvcnQgY29uc3QgbmFtZUlucHV0VmFsdWUgPSBwb3B1cEVkaXRGb3JtLnF1ZXJ5U2VsZWN0b3IoJyNuYW1lLWlucHV0Jyk7XHJcbmV4cG9ydCBjb25zdCBwcm9mZXNzaW9uSW5wdXRWYWx1ZSA9IHBvcHVwRWRpdEZvcm0ucXVlcnlTZWxlY3RvcignI3Byb2Zlc3Npb24taW5wdXQnKTtcclxuXHJcbi8vYXZhdGFyIGVkaXRvclxyXG5leHBvcnQgY29uc3QgYXZhdGFyRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLWVkaXQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgYXZhdGFyRWRpdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NoYW5nZV9hdmF0YXItZm9ybVwiKTtcclxuXHJcbi8vY2FyZCBhZGQgZm9ybSBkYXRhXHJcbmV4cG9ydCBjb25zdCB0aXRsZUlucHV0VmFsdWUgPSBhZGRDYXJkRm9ybS5xdWVyeVNlbGVjdG9yKCcjYWRkX3RpdGxlLWlucHV0Jyk7XHJcblxyXG5leHBvcnQgY29uc3QgbGlua0lucHV0VmFsdWUgPSBhZGRDYXJkRm9ybS5xdWVyeVNlbGVjdG9yKCcjYWRkX2xpbmstaW5wdXQnKTtcclxuXHJcbmV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcclxuICAgIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcclxuICAgIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19zdWJtaXRcIixcclxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gICAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgICBlcnJvckNsYXNzOiBcInBvcHVwX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcbiIsImltcG9ydCB7IGF2YXRhckVkaXRGb3JtIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50c1wiO1xyXG5cclxuY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbCkge1xyXG4gICAgdGhpcy5fc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWw7XHJcbiAgICB0aGlzLl9hdmF0YXJFZGl0Rm9ybSA9IGF2YXRhckVkaXRGb3JtO1xyXG4gIH07XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IFtcclxuICAgICAgLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3NldHRpbmdzLmlucHV0U2VsZWN0b3IpLFxyXG4gICAgXTtcclxuICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b24oaW5wdXRMaXN0LCBzdWJtaXRCdXR0b24sIHNldHRpbmdzKTtcclxuXHJcbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XHJcbiAgICAgICAgLy9jaGVjayB2YWxpZGF0aW9uXHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KHRoaXMuX2Zvcm0sIGlucHV0LCB0aGlzLl9zZXR0aW5ncyk7XHJcbiAgICAgICAgLy90b2dnbGUgdGhlIGJ1dHRvblxyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvbihpbnB1dExpc3QsIHN1Ym1pdEJ1dHRvbiwgdGhpcy5fc2V0dGluZ3MpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFwiI1wiICsgaW5wdXQuaWQgKyBcIi1lcnJvclwiKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgfTtcclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjXCIgKyBpbnB1dC5pZCArIFwiLWVycm9yXCIpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmVycm9yQ2xhc3MpO1xyXG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gIH07XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoX2Zvcm0sIGlucHV0LCBfc2V0dGluZ3MpIHtcclxuICAgIGlmIChpbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCwgdGhpcy5fZm9ybSwgdGhpcy5fc2V0dGluZ3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXQsIHRoaXMuX2Zvcm0sIHRoaXMuX3NldHRpbmdzKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfaGFzVmFsaWRJbnB1dHMoaW5wdXRMaXN0KSB7XHJcbiAgICByZXR1cm4gaW5wdXRMaXN0LmV2ZXJ5KChpbnB1dCkgPT4gaW5wdXQudmFsaWRpdHkudmFsaWQgPT09IHRydWUpO1xyXG4gIH07XHJcblxyXG4gIF90b2dnbGVCdXR0b24oKSB7XHJcbiAgICBjb25zdCBpbnB1dExpc3QgPSBbXHJcbiAgICAgIC4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9zZXR0aW5ncy5pbnB1dFNlbGVjdG9yKSxcclxuICAgIF07XHJcbiAgICB0aGlzLmJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICBpZiAodGhpcy5faGFzVmFsaWRJbnB1dHMoaW5wdXRMaXN0KSkge1xyXG4gICAgICB0aGlzLl9lbmFibGVTdWJtaXRCdXR0b24oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF9lbmFibGVTdWJtaXRCdXR0b24oKSB7XHJcbiAgICB0aGlzLmJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5idXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICB9O1xyXG5cclxuICBkaXNhYmxlU3VibWl0QnV0dG9uKCkge1xyXG4gICAgdGhpcy5idXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgdGhpcy5idXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICB9O1xyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiBlLnByZXZlbnREZWZhdWx0KCkpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9O1xyXG59O1xyXG5cclxuY29uc3Qgc2V0dGluZ3MgPSB7fTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cCkge1xyXG4gICAgdGhpcy5wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXApO1xyXG4gICAgdGhpcy5jbG9zZUJ1dHRvbiA9IHRoaXMucG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gIH07XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLnBvcHVwLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9pcy1vcGVuXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH07XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfaXMtb3BlblwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9O1xyXG5cclxuICBfaGFuZGxlT3ZlcmxheUNsaWNrKGV2ZW50KSB7XHJcbiAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX2lzLW9wZW5cIikpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldmVudCkgPT4ge1xyXG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLmNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG4gICAgdGhpcy5wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlT3ZlcmxheUNsaWNrLmJpbmQodGhpcykpO1xyXG4gIH07XHJcbn07XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cCwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXApO1xyXG4gICAgdGhpcy5oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMucG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19zdWJtaXRcIik7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIik7XHJcbiAgfTtcclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goXHJcbiAgICAgIChpbnB1dCkgPT4gKHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZSlcclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XHJcbiAgfTtcclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgfTtcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuaGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9O1xyXG5cclxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZykge1xyXG4gICAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcclxuICAgIH1cclxuICB9XHJcblxyXG59O1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBzZWxlY3Rvcikge1xyXG4gICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XHJcbiAgfTtcclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLml0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gICAgLy91cyB0aGlzLnJlbmRlcmVyIHRvIGNyZWF0ZSB0aGUgZWxlbWVudHMgZm9yIHJlbmRlcmluZ1xyXG4gIH07XHJcblxyXG4gIGFkZEl0ZW0oaXRlbSkge1xyXG4gICAgdGhpcy5lbGVtZW50LnByZXBlbmQoaXRlbSk7XHJcbiAgICAvL3Rha2UgdGhlIGl0ZW0gYW5kIHJlbmRlciBpdCBpbnRvIHRoaXMuX2VsZW1lbnRcclxuICB9O1xyXG59O1xyXG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IHtcclxuICBpbml0aWFsQ2FyZHMsXHJcbiAgYWRkQ2FyZEJ1dHRvbixcclxuICBwcm9maWxlRWRpdEJ1dHRvbixcclxuICBwcm9maWxlRWRpdENsb3NlLFxyXG4gIGFkZENsb3NlQnV0dG9uLFxyXG4gIGFkZFNhdmVCdXR0b24sXHJcbiAgcHJldmlld0Nsb3NlQnV0dG9uLFxyXG4gIHByb2ZpbGVUaXRsZSxcclxuICBwcm9maWxlUHJvZmVzc2lvbixcclxuICBwb3B1cEVkaXRGb3JtLFxyXG4gIHByb2ZpbGVFZGl0UG9wdXAsXHJcbiAgYWRkQ2FyZEZvcm0sXHJcbiAgbmFtZUlucHV0VmFsdWUsXHJcbiAgcHJvZmVzc2lvbklucHV0VmFsdWUsXHJcbiAgdGl0bGVJbnB1dFZhbHVlLFxyXG4gIGxpbmtJbnB1dFZhbHVlLFxyXG4gIHNldHRpbmdzLFxyXG4gIHBvcHVwV2l0aERlbGV0ZSxcclxuICBkZWxldGVCdXR0b24sXHJcbiAgYXZhdGFyRWRpdEJ1dHRvbixcclxuICBhdmF0YXJFZGl0Rm9ybSxcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanNcIjtcclxuXHJcbmNvbnN0IGNhcmRTZWxlY3RvciA9IFwiI2NhcmQtdGVtcGxhdGVcIjtcclxuY29uc3QgY2FyZExpc3RFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2NhcmQtZ3JpZFwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBpbWFnZVByZXZpZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2ltYWdlX3ByZXZpZXdcIik7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlID0gaW1hZ2VQcmV2aWV3LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBJbWFnZVRpdGxlID0gaW1hZ2VQcmV2aWV3LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucG9wdXBfX2ltYWdlLXRpdGxlXCJcclxuKTtcclxuXHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIHBvcHVwRWRpdEZvcm0pO1xyXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgYWRkQ2FyZEZvcm0pO1xyXG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuY29uc3QgYXZhdGFyRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBhdmF0YXJFZGl0Rm9ybSk7XHJcbmF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjYWRkLXBvcHVwXCIsIChkYXRhKSA9PiB7XHJcbiAgYWRkQ2FyZFBvcHVwLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgYXBpLmFkZENhcmRzKGRhdGEpLnRoZW4oKGNhcmREYXRhKSA9PiB7XHJcbiAgICBjb25zdCBjYXJkID0gcmVuZGVyQ2FyZChjYXJkRGF0YSk7XHJcbiAgICBzZWN0aW9uLmFkZEl0ZW0oY2FyZCk7XHJcbiAgICBhZGRDYXJkUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICBhZGRDYXJkUG9wdXAuY2xvc2UoKTtcclxuICB9KTtcclxufSk7XHJcblxyXG5hZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2VkaXQtcG9wdXBcIiwgKGRhdGEpID0+IHtcclxuICBlZGl0UG9wdXAucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICBhcGkuZWRpdFByb2ZpbGUoeyBuYW1lOiBkYXRhLm5hbWUsIGFib3V0OiBkYXRhLnByb2Zlc3Npb24gfSkudGhlbigodXNlcikgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlci5uYW1lLCB1c2VyLmFib3V0KTtcclxuICAgIGVkaXRQb3B1cC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICB9KTtcclxuXHJcbiAgZWRpdFBvcHVwLmNsb3NlKCk7XHJcbn0pO1xyXG5cclxuLy9hdmF0YXIgY2hhbmdlIGJlbG93XHJcblxyXG5jb25zdCBhdmF0YXJFZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNjaGFuZ2VfYXZhdGFyXCIsIChkYXRhKSA9PiB7XHJcbiAgYXZhdGFyRWRpdFBvcHVwLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgYXBpLmNoYW5nZUF2YXRhcihkYXRhKS50aGVuKHJlcyA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgdXNlckluZm8uc2V0QXZhdGFySW1nSW5mbyhyZXMuYXZhdGFyKTtcclxuICAgIGF2YXRhckVkaXRQb3B1cC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICAgIGF2YXRhckVkaXRQb3B1cC5jbG9zZSgpO1xyXG4gIH0pO1xyXG59KTtcclxuYXZhdGFyRWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5hdmF0YXJFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgYXZhdGFyRWRpdFBvcHVwLm9wZW4oKTtcclxuICBcclxufSk7XHJcblxyXG5cclxuXHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgcHJvZmlsZSBlZGl0IGZvcm0gICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuY29uc3QgaW1hZ2VQcmV2aWV3UG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjaW1hZ2VfcHJldmlld1wiKTtcclxuaW1hZ2VQcmV2aWV3UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vZWRpdCBwb3B1cCBpcyBvcGVuIGV2ZW50XHJcbmNvbnN0IGF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyXCIpO1xyXG5jb25zdCBuYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbmZvbmFtZVwiKTtcclxuY29uc3QgcHJvZmVzc2lvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmVzc2lvblwiKTtcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKG5hbWUsIHByb2Zlc3Npb24sIGF2YXRhcik7XHJcblxyXG5lZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIG5hbWVJbnB1dFZhbHVlLnZhbHVlID0gdXNlckRhdGEubmFtZTtcclxuICBwcm9mZXNzaW9uSW5wdXRWYWx1ZS52YWx1ZSA9IHVzZXJEYXRhLnByb2Zlc3Npb247XHJcbiAgZWRpdFBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBoYW5kZWxJbWFnZUNsaWNrKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgaW1hZ2VQcmV2aWV3UG9wdXAub3Blbih7IG5hbWUsIGxpbmsgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoY2FyZERhdGEpIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICBjYXJkRGF0YSxcclxuICAgIGNhcmRTZWxlY3RvcixcclxuICAgIGhhbmRlbEltYWdlQ2xpY2ssXHJcbiAgICBoYW5kbGVEZWxldGVDbGljayxcclxuICAgIGhhbmRsZUxpa2VDbGlja1xyXG4gICk7XHJcbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpO1xyXG59XHJcblxyXG5jb25zdCBwb3B1cFdpdGhDb25maXJtID0gbmV3IFBvcHVwV2l0aENvbmZpcm0oXCIjZGVsZXRlX2NhcmRcIik7XHJcbnBvcHVwV2l0aENvbmZpcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNsaWNrKGNhcmRJZCkge1xyXG4gIHBvcHVwV2l0aENvbmZpcm0ub3BlbigpO1xyXG4gIHBvcHVwV2l0aENvbmZpcm0uc2V0U3VibWl0QWN0aW9uKCgpID0+IHtcclxuICAgIGFwaS5kZWxldGVDYXJkKHsgY2FyZElkIH0pLnRoZW4oKCkgPT4ge1xyXG4gICAgICB0aGlzLmhhbmRsZURlbGV0ZSgpO1xyXG4gICAgfSk7XHJcbiAgICBwb3B1cFdpdGhDb25maXJtLmNsb3NlKCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUxpa2VDbGljayhjYXJkSWQpIHtcclxuICBpZiAodGhpcy5faXNMaWtlZCkge1xyXG4gICAgYXBpLnJlbW92ZUxpa2UoY2FyZElkKS50aGVuKCgpID0+IHtcclxuICAgICAgdGhpcy5oYW5kbGVMaWtlKGZhbHNlKTtcclxuICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBhcGkuYWRkTGlrZShjYXJkSWQpLnRoZW4oKCkgPT4ge1xyXG4gICAgICB0aGlzLmhhbmRsZUxpa2UodHJ1ZSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbi8vY2FyZHMgYWRkIGZvcm1cclxuXHJcbmFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICBhZGRGb3JtVmFsaWRhdG9yLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcclxuICBhZGRDYXJkUG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbi8vQXBpIG9iamVjdFxyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG5cclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjRiNTYxMGE0LWQ0ZmItNGFjMy1hMGNmLTVjZjA4ZmMyNjQxYlwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcblxyXG5sZXQgc2VjdGlvbjtcclxuYXBpLmdldEluaXRpYWxDYXJkcygpLnRoZW4oKGNhcmRzKSA9PiB7XHJcbiAgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gICAge1xyXG4gICAgICBpdGVtczogY2FyZHMsXHJcbiAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNhcmQgPSByZW5kZXJDYXJkKGl0ZW0pO1xyXG4gICAgICAgIHNlY3Rpb24uYWRkSXRlbShjYXJkKTtcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBcIi5lbGVtZW50c19fY2FyZC1ncmlkXCJcclxuICApO1xyXG4gIHNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxufSk7XHJcblxyXG5hcGkuZ2V0VXNlckluZm8oKS50aGVuKCh1c2VyKSA9PiB7XHJcbiAgdXNlckluZm8uc2V0VXNlckluZm8odXNlci5uYW1lLCB1c2VyLmFib3V0KTtcclxuICB1c2VySW5mby5zZXRBdmF0YXJJbWdJbmZvKHVzZXIuYXZhdGFyKTtcclxufSk7XHJcblxyXG4vL2NyZWF0ZSBuZXcgY2FyZFxyXG5cclxuLy8gZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuLy8gY29uc3QgbGlua0lucHV0VmFsdWUgPSBldmVudC50YXJnZXQubGluay52YWx1ZTtcclxuLy8gcmVuZGVyQ2FyZCh7XHJcbi8vICAgICBuYW1lOiB0aXRsZUlucHV0VmFsdWUudmFsdWUsXHJcbi8vICAgICBsaW5rOiBsaW5rSW5wdXRWYWx1ZSxcclxuLy8gfSk7XHJcblxyXG4vLyBjbG9zZVBvcHVwKGFkZENhcmRQb3B1cCk7XHJcbi8vIGFkZENhcmRGb3JtLnJlc2V0KCk7XHJcbi8vIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkX3N1Ym1pdFwiKTtcclxuLy8gYWRkRm9ybVZhbGlkYXRvci5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcblxyXG4gICAgdGhpcy5fdGl0bGUgPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlLXRpdGxlXCIpO1xyXG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xyXG4gIH07XHJcblxyXG4gIG9wZW4oeyBsaW5rLCBuYW1lIH0pIHtcclxuICAgIHRoaXMuX3RpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH07XHJcbn07XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3RvcihuYW1lLCBwcm9mZXNzaW9uLCBhdmF0YXIpIHtcclxuICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLnByb2Zlc3Npb24gPSBwcm9mZXNzaW9uO1xyXG4gICAgdGhpcy5saW5rID0gYXZhdGFyO1xyXG4gIH07XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcHJvZmVzc2lvbjogdGhpcy5wcm9mZXNzaW9uLnRleHRDb250ZW50LFxyXG4gICAgICBuYW1lOiB0aGlzLm5hbWUudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH07XHJcblxyXG4gIHNldFVzZXJJbmZvKG5hbWUsIHByb2Zlc3Npb24pIHtcclxuICAgIHRoaXMubmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLnByb2Zlc3Npb24udGV4dENvbnRlbnQgPSBwcm9mZXNzaW9uO1xyXG4gIH07XHJcblxyXG5cclxuICBzZXRBdmF0YXJJbWdJbmZvKGxpbmspIHtcclxuICAgIHRoaXMubGluay5zcmMgPSBsaW5rXHJcbiAgfTtcclxuXHJcblxyXG5cclxufTtcclxuXHJcblxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXApIHtcclxuICAgIHN1cGVyKHBvcHVwKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMucG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuICB9XHJcblxyXG4gIHNldFN1Ym1pdEFjdGlvbihoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICB0aGlzLmhhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuaGFuZGxlRm9ybVN1Ym1pdCgpO1xyXG4gICAgfSk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xyXG4gICAgfVxyXG4gIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgLy8gY29uc3RydWN0b3IgYm9keVxyXG4gICAgdGhpcy5nZXRJbml0aWFsQ2FyZHMgPSB0aGlzLmdldEluaXRpYWxDYXJkcztcclxuICAgIHRoaXMuYWRkQ2FyZHMgPSB0aGlzLmFkZENhcmRzO1xyXG4gICAgdGhpcy5lZGl0UHJvZmlsZSA9IHRoaXMuZWRpdFByb2ZpbGU7XHJcbiAgICB0aGlzLmxpa2VCdXR0b24gPSB0aGlzLmxpa2VCdXR0b247XHJcbiAgICB0aGlzLmFkZExpa2UgPSB0aGlzLmFkZExpa2U7XHJcbiAgICB0aGlzLnJlbW92ZUxpa2UgPSB0aGlzLnJlbW92ZUxpa2U7XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcclxuICAgICAgXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MS9jYXJkc1wiLFxyXG4gICAgICB7XHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgYXV0aG9yaXphdGlvbjogXCJiMzhlZDRkNi0zMjc1LTQ1MzgtODQ2ZC03ZWM1ZDU2ZmQxODVcIixcclxuICAgICAgICB9LFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgaWYgKHJlcy5vaykge1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBhZGRDYXJkcyh7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXHJcbiAgICAgIFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjEvY2FyZHNcIixcclxuICAgICAge1xyXG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgYXV0aG9yaXphdGlvbjogXCJiMzhlZDRkNi0zMjc1LTQ1MzgtODQ2ZC03ZWM1ZDU2ZmQxODVcIixcclxuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vSlNPTlwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lLCBsaW5rIH0pLFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgaWYgKHJlcy5vaykge1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRVc2VySW5mbygpIHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFxyXG4gICAgICBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxL3VzZXJzL21lXCIsXHJcbiAgICAgIHtcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICBhdXRob3JpemF0aW9uOiBcImIzOGVkNGQ2LTMyNzUtNDUzOC04NDZkLTdlYzVkNTZmZDE4NVwiLFxyXG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9KU09OXCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZWRpdFByb2ZpbGUoeyBuYW1lLCBhYm91dCB9KSB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcclxuICAgICAgXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MS91c2Vycy9tZVwiLFxyXG4gICAgICB7XHJcbiAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgYXV0aG9yaXphdGlvbjogXCJiMzhlZDRkNi0zMjc1LTQ1MzgtODQ2ZC03ZWM1ZDU2ZmQxODVcIixcclxuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vSlNPTlwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lLCBhYm91dCB9KSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZGVsZXRlQ2FyZCh7IGNhcmRJZCB9KSB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcclxuICAgICAgXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MS9jYXJkcy9cIiArIGNhcmRJZCxcclxuICAgICAge1xyXG4gICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICBhdXRob3JpemF0aW9uOiBcImIzOGVkNGQ2LTMyNzUtNDUzOC04NDZkLTdlYzVkNTZmZDE4NVwiLFxyXG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9KU09OXCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgYWRkTGlrZShjYXJkSWQpIHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFxyXG4gICAgICBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxL2NhcmRzL1wiICsgY2FyZElkICsgXCIvbGlrZXNcIixcclxuICAgICAge1xyXG4gICAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICBhdXRob3JpemF0aW9uOiBcImIzOGVkNGQ2LTMyNzUtNDUzOC04NDZkLTdlYzVkNTZmZDE4NVwiLFxyXG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9KU09OXCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgcmVtb3ZlTGlrZShjYXJkSWQpIHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFxyXG4gICAgICBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxL2NhcmRzL1wiICsgY2FyZElkICsgXCIvbGlrZXNcIixcclxuICAgICAge1xyXG4gICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICBhdXRob3JpemF0aW9uOiBcImIzOGVkNGQ2LTMyNzUtNDUzOC04NDZkLTdlYzVkNTZmZDE4NVwiLFxyXG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9KU09OXCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gIH1cclxuXHJcblxyXG4gIGFzeW5jIGNoYW5nZUF2YXRhcigge2xpbmt9ICkge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXHJcbiAgICAgIFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjEvdXNlcnMvbWUvYXZhdGFyXCIsXHJcbiAgICAgIHtcclxuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICBhdXRob3JpemF0aW9uOiBcImIzOGVkNGQ2LTMyNzUtNDUzOC04NDZkLTdlYzVkNTZmZDE4NVwiLFxyXG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9KU09OXCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGF2YXRhcjogbGluayB9KSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuXHJcblxyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiY2FyZERhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJ0aGlzIiwiX2NhcmRFbGVtZW50IiwicmVtb3ZlIiwiaXNMaWtlZCIsIl9pc0xpa2VkIiwiX3RvZ2dsZUxpa2UiLCJsaWtlQnV0dG9uIiwiY2xhc3NMaXN0IiwiYWRkIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiX2NhcmRJZCIsIl9pZCIsIl9oYW5kbGVMaWtlQ2xpY2siLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZ2V0VmlldyIsIl9zZXRFdmVudExpc3RlbmVycyIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImFkZENhcmRCdXR0b24iLCJwcm9maWxlRWRpdEJ1dHRvbiIsInBvcHVwRWRpdEZvcm0iLCJhZGRDYXJkRm9ybSIsIm5hbWVJbnB1dFZhbHVlIiwicHJvZmVzc2lvbklucHV0VmFsdWUiLCJhdmF0YXJFZGl0QnV0dG9uIiwiYXZhdGFyRWRpdEZvcm0iLCJzZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiZm9ybUVsIiwiX3NldHRpbmdzIiwiX2Zvcm0iLCJfYXZhdGFyRWRpdEZvcm0iLCJpbnB1dExpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwic3VibWl0QnV0dG9uIiwiX3RvZ2dsZUJ1dHRvbiIsImZvckVhY2giLCJpbnB1dCIsImUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3Nob3dJbnB1dEVycm9yIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzVmFsaWRJbnB1dHMiLCJldmVyeSIsImJ1dHRvbiIsIl9lbmFibGVTdWJtaXRCdXR0b24iLCJkaXNhYmxlU3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJlbmFibGVWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJQb3B1cCIsInBvcHVwIiwiZXZlbnQiLCJrZXkiLCJjbG9zZSIsImNsb3NlQnV0dG9uIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2hhbmRsZU92ZXJsYXlDbGljayIsInRhcmdldCIsImNvbnRhaW5zIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9zdWJtaXRCdXR0b24iLCJfaW5wdXRMaXN0IiwiX2dldElucHV0VmFsdWVzIiwiX2Zvcm1WYWx1ZXMiLCJ2YWx1ZSIsInJlc2V0IiwicmVuZGVyTG9hZGluZyIsImlzTG9hZGluZyIsIlNlY3Rpb24iLCJzZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJlbGVtZW50IiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsInByZXBlbmQiLCJpbWFnZVByZXZpZXciLCJGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsImFkZENhcmRQb3B1cCIsImRhdGEiLCJhcGkiLCJhZGRDYXJkcyIsInRoZW4iLCJjYXJkIiwicmVuZGVyQ2FyZCIsInNlY3Rpb24iLCJlZGl0UG9wdXAiLCJlZGl0UHJvZmlsZSIsImFib3V0IiwicHJvZmVzc2lvbiIsInVzZXIiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiYXZhdGFyRWRpdFBvcHVwIiwiY2hhbmdlQXZhdGFyIiwicmVzIiwiY29uc29sZSIsImxvZyIsInNldEF2YXRhckltZ0luZm8iLCJhdmF0YXIiLCJpbWFnZVByZXZpZXdQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfdGl0bGUiLCJfaW1hZ2UiLCJnZXRVc2VySW5mbyIsImhhbmRlbEltYWdlQ2xpY2siLCJ1c2VyRGF0YSIsInBvcHVwV2l0aENvbmZpcm0iLCJzZXRTdWJtaXRBY3Rpb24iLCJjYXJkSWQiLCJkZWxldGVDYXJkIiwiaGFuZGxlRGVsZXRlIiwicmVtb3ZlTGlrZSIsImhhbmRsZUxpa2UiLCJhZGRMaWtlIiwib3B0aW9ucyIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJiYXNlVXJsIiwiY2FyZHMiXSwic291cmNlUm9vdCI6IiJ9